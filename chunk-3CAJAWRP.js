import{h as N,j as $,k as F}from"./chunk-TESD5I5I.js";import{a as D}from"./chunk-ZROIJHUT.js";import{a as V,b as i,c as I,d as R,e as y,f as C,g as A,h as z,i as G,k as j}from"./chunk-6SDRBIE7.js";import{Da as u,H as b,Mb as B,Na as S,Pb as L,Ra as P,Xa as g,Z as _,_a as T,cb as n,db as e,ea as h,eb as l,fa as O,fb as w,hb as d,ib as f,k as M,ka as E,rb as o,sb as k,vb as v,xb as p,yb as m}from"./chunk-EDZJABTV.js";var U=s=>({active:s});function K(s,c){if(s&1){let t=w();n(0,"form",12)(1,"label",13),o(2,"\u041B\u043E\u0433\u0438\u043D"),e(),l(3,"input",14),n(4,"label",15),o(5,"\u041F\u0430\u0440\u043E\u043B\u044C"),e(),l(6,"input",16),n(7,"small-button",17),p(8,"async"),d("click",function(r){h(t);let x=f();return O(x.login(r))}),e(),n(9,"button",18),o(10,"\u0417\u0430\u0431\u044B\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C?"),e()()}if(s&2){let t=f();g("formGroup",t.authForm),u(7),g("buttonTitle","\u0412\u043E\u0439\u0442\u0438")("disabled",t.authForm.invalid)("loading",m(8,4,t.isLoading$)||!1)}}function H(s,c){if(s&1){let t=w();n(0,"form",12)(1,"label",19),o(2,"\u041B\u043E\u0433\u0438\u043D"),e(),l(3,"input",20),n(4,"label",21),o(5,"\u041F\u0430\u0440\u043E\u043B\u044C"),e(),l(6,"input",22),n(7,"label",23),o(8,"\u041F\u0430\u0440\u043E\u043B\u044C"),e(),l(9,"input",24),n(10,"small-button",17),p(11,"async"),d("click",function(r){h(t);let x=f();return O(x.registerNewUser(r))}),e(),n(12,"button",18),o(13,"\u0417\u0430\u0431\u044B\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C?"),e()()}if(s&2){let t=f();g("formGroup",t.registerForm),u(10),g("buttonTitle","\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F")("disabled",t.registerForm.invalid)("loading",m(11,4,t.isLoading$)||!1)}}var q=class s{authService=_($);destroyRef=_(E);router=_(N);authForm=new y({username:new C("",[i.required,i.maxLength(100),i.email]),password:new C("",[i.required,i.maxLength(100),i.minLength(6)])});registerForm=new y({username:new C("",[i.required,i.maxLength(100),i.email]),password:new C("",[i.required,i.maxLength(100),i.minLength(6)])});isLoading$=new M(!1);formType$=new M("login");errorMessage="";login(c){this.isLoading$.next(!0);try{c.preventDefault()}catch{}this.disableInputs();let{username:t,password:a}=this.authForm.value;this.authService.login(t,a).pipe(b(()=>{this.isLoading$.next(!1),this.enableInputs()}),F(this.destroyRef)).subscribe({next:r=>{this.authService.saveUser(r),this.authService.isAuthorized.next(!0),this.router.navigate([""])},error:r=>{this.errorMessage=r.errorText?r.errorText:"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437 \u0438\u043B\u0438 \u043E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u0432 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0443.",console.error(r)}})}disableInputs(){this.authForm.get("password")?.disable(),this.authForm.get("username")?.disable(),this.registerForm.get("password")?.disable(),this.registerForm.get("username")?.disable()}enableInputs(){this.authForm.get("password")?.enable(),this.authForm.get("username")?.enable(),this.registerForm.get("password")?.enable(),this.registerForm.get("username")?.enable()}changeFormType(c){this.formType$.next(c)}registerNewUser(c){this.isLoading$.next(!0),this.disableInputs(),this.authService.registerUser(this.registerForm.value.username,this.registerForm.value.password).pipe(b(()=>{this.isLoading$.next(!1),this.enableInputs()}),F(this.destroyRef)).subscribe({next:t=>{t&&(this.authForm.setValue({username:this.registerForm.value.username,password:this.registerForm.value.password}),this.login(t))},error:t=>{console.log(t),t.status===409?this.errorMessage="\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0441 \u0442\u0430\u043A\u0438\u043C \u043B\u043E\u0433\u0438\u043D\u043E\u043C \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D.":this.errorMessage=t.errorText?t.errorText:"\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430, \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437 \u0438\u043B\u0438 \u043E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u0432 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0443."}})}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=S({type:s,selectors:[["app-login"]],decls:24,vars:16,consts:[[1,"container"],[1,"left-section"],["src","assets/icons/logo.svg","alt","small-logo"],[1,"info"],[1,"title"],[1,"description"],["src","assets/images/big-full-logo.svg","alt","big-full-logo"],[1,"form-section"],[1,"form-container"],[1,"action-buttons"],[3,"click","ngClass"],[1,"error-text"],[3,"formGroup"],["for","login"],["id","login","type","text","formControlName","username"],["for","password"],["id","password","type","password","formControlName","password"],[1,"enter",3,"click","buttonTitle","disabled","loading"],[1,"forgot-password"],["for","login-2"],["id","login-2","type","text","formControlName","username"],["for","password-reaped"],["id","password-reaped","type","password","formControlName","password"],["for","password-reaped-2"],["id","password-reaped-2","type","password","formControlName","password"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"div",1),l(2,"img",2),n(3,"div",3)(4,"span",4),o(5,"STOCK VISOR"),e(),n(6,"span",5),o(7,"\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u0430"),e()(),l(8,"img",6),e(),n(9,"div",7)(10,"div",8)(11,"div",9)(12,"button",10),p(13,"async"),d("click",function(){return a.changeFormType("login")}),o(14," \u0412\u043E\u0439\u0442\u0438 "),e(),n(15,"button",10),p(16,"async"),d("click",function(){return a.changeFormType("register")}),o(17," \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F "),e()(),n(18,"span",11),o(19),e(),P(20,K,11,6,"form",12),p(21,"async"),p(22,"async"),P(23,H,14,6,"form",12),e()()()),t&2&&(u(12),g("ngClass",v(12,U,m(13,4,a.formType$)==="login")),u(3),g("ngClass",v(14,U,m(16,6,a.formType$)==="register")),u(4),k(a.errorMessage),u(),T(m(21,8,a.formType$)==="login"?20:m(22,10,a.formType$)==="register"?23:-1))},dependencies:[D,j,A,V,I,R,z,G,L,B],styles:['.container[_ngcontent-%COMP%]{background:linear-gradient(96.2deg,#0056fe 48.93%,#3479ff47 109.55%);height:100vh;width:100vw;display:flex;min-width:900px}.container[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]{flex-basis:55%;display:flex;flex-direction:column;min-width:486px}.container[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   img[alt=big-full-logo][_ngcontent-%COMP%]{width:100%;margin-top:auto}.container[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   img[alt=small-logo][_ngcontent-%COMP%]{height:150px;width:250px}.container[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{color:#fff;display:flex;flex-direction:column;margin-top:100px;margin-left:12%}.container[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:50px;font-weight:500}.container[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-weight:400;font-size:26px}.container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{flex-basis:45%;background-color:#eff1f7;border-top-left-radius:100px;display:flex;align-items:center;justify-content:center;min-width:626px;min-height:860px}.container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background-color:#fff;position:relative;height:748px;box-shadow:15px 10px 16px #d2dae3b2,5px 5px 13px #d2dae34d,-5px -5px 10px #fff,-20px -20px 18px #fffc;border-radius:40px}.container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{height:104px;background-color:#fff;width:100%;border-top-left-radius:40px;border-top-right-radius:40px;padding-left:54px;padding-top:54px;display:flex;gap:40px}.container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;border-radius:6px;font-size:26px;font-weight:700;color:#a3abc3;padding:18px;display:flex;align-items:center;border-bottom:4px solid transparent;transition:border-bottom-color .3s}.container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#eff1f78a}.container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#000;border-bottom:4px solid #0056FE}.container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{background-color:#eff1f7;padding:130px 40px 0;display:flex;flex-direction:column;width:464px;min-width:580px;height:100%;border-radius:40px}.container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:14px;padding-left:10px;color:#a3abc3}.container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #A3ABC3;height:56px;border-radius:10px;background-color:transparent;font-size:18px;padding-left:10px}.container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   #login[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   #login-2[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   #password-reaped[_ngcontent-%COMP%]{margin-bottom:30px}.container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .enter[_ngcontent-%COMP%]{margin-top:60px;margin-bottom:40px}.container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:#f55;background-color:transparent;cursor:pointer;width:fit-content;margin-left:auto;margin-right:auto;font-size:16px;font-weight:500;position:relative;border-radius:8px;height:30px;border:1px solid transparent}.container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]:hover{border:1px solid rgb(222,226.125,238.5)}.container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]:active{background-color:#e8ebf4}.container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]:after{content:"";display:block;width:92%;height:2px;background-color:currentColor;position:absolute;bottom:0;left:6px}.container[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{color:#f55;font-size:18px;position:absolute;top:130px;left:40px;font-weight:500;width:86%}']})};export{q as LoginComponent};
